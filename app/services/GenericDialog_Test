import ij.*; 
import ij.process.*; 
import ij.gui.*; 
import java.awt.*; 
import ij.plugin.frame.*; 
import ij.IJ.*; 
import ij.ImagePlus.*; 

public class GenericDialog_Test extends PlugInFrame { 

 public GenericDialog_Test() { 
   super("Testing"); 
 } 

 public void run(String arg) { 
  double width=0.0; 
  double height=0.0; 
  boolean validInputs = false; 

  while (!validInputs) { 
   GenericDialog dialog = new GenericDialog("Input settings."); 

   dialog.addNumericField("Width:", 50, 0);   
   dialog.addNumericField("Height:", 100, 0); 
   validInputs = true; 
   dialog.showDialog(); 

   if (dialog.wasCanceled()) return; 

   width = dialog.getNextNumber(); 
   if (width < 0.0 || dialog.invalidNumber() )  { 
     validInputs = false; 
     IJ.showMessage("Width is Invalid."); 
   } 

   height = (int)dialog.getNextNumber(); 
   if (height < 0.0 || dialog.invalidNumber() )   { 
     validInputs = false; 
     IJ.showMessage("Height is Invalid."); 
   } 
  } 

  //Of course, here I would call a function to do calculations 
  IJ.showMessage("Inputs were " + width + ", " + height); 
  return; 
  } 
} 